<!DOCTYPE html>
<html>
<head>
    <title>Simple Canvas Game</title>
    <style>
        body { background-color: #222; color: white; text-align: center; font-family: sans-serif; }
        /* Centering the game board */
        canvas { background-color: black; border: 2px solid white; display: block; margin: 0 auto; }
    </style>
</head>
<body>

    <h1>HP: <span id="hp">100</span> | Score: <span id="score">0</span></h1>
    <canvas id="gameCanvas" width="800" height="600"></canvas>

    <script>
        var canvas = document.getElementById("gameCanvas");
        var ctx = canvas.getContext("2d");

        // Game State
        var hp = 100;
        var score = 0;
        var enemies = [];
        var friends = []; 

        var playerX = 380;
        var playerY = 540;
        var playerSize = 40;
        var speed = 20;

        // SPAWN ENEMIES (Red) - Every 1 second
        setInterval(function() {
            enemies.push({
                x: Math.random() * (canvas.width - 20),
                y: -20,
                size: 20,
                speed: 3
            });
        }, 1000);

        // SPAWN FRIENDS (Blue) - Every 2 seconds
        setInterval(function() {
            friends.push({
                x: Math.random() * (canvas.width - 20),
                y: -20,
                size: 20,
                speed: 2
            });
        }, 2000);

        function draw() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);

            // 1. Draw Player (Green)
            ctx.fillStyle = "lime";
            ctx.fillRect(playerX, playerY, playerSize, playerSize);

            // 2. Handle Enemies (Red)
            ctx.fillStyle = "red";
            for (var i = 0; i < enemies.length; i++) {
                var e = enemies[i];
                e.y += e.speed; 
                ctx.fillRect(e.x, e.y, e.size, e.size);

                // Collision with Red: Lose 1 HP
                if (playerX < e.x + e.size && playerX + playerSize > e.x && playerY < e.y + e.size && playerY + playerSize > e.y) {
                    hp -= 1;
                    enemies.splice(i, 1);
                    i--;
                } 
                // Remove if off screen
                else if (e.y > canvas.height) {
                    enemies.splice(i, 1);
                    i--;
                }
            }

            // 3. Handle Friends (Blue)
            ctx.fillStyle = "deepskyblue";
            for (var j = 0; j < friends.length; j++) {
                var f = friends[j];
                f.y += f.speed; 
                ctx.fillRect(f.x, f.y, f.size, f.size);

                // Collision with Blue: +1 Score
                if (playerX < f.x + f.size && playerX + playerSize > f.x && playerY < f.y + f.size && playerY + playerSize > f.y) {
                    score += 1;
                    friends.splice(j, 1);
                    j--;
                } 
                // MISS the Blue: Lose 1 HP
                else if (f.y > canvas.height) {
                    hp -= 1; 
                    friends.splice(j, 1);
                    j--;
                }
            }

            // Update UI
            document.getElementById("hp").innerText = hp;
            document.getElementById("score").innerText = score;

            // Check Death
            if (hp <= 0) {
                alert("Game Over! Score: " + score);
                location.reload(); 
            }

            requestAnimationFrame(draw);
        }

        // Controls
        window.addEventListener("keydown", function(event) {
            if (event.key === "ArrowRight" && playerX <= canvas.width - playerSize) {
                playerX += speed;
            }
            if (event.key === "ArrowLeft" && playerX >= 0) {
                playerX -= speed;
            }
            // Optional: Added Up/Down since canvas is tall
            if (event.key === "ArrowUp" && playerY >= 0) {
                playerY -= speed;
            }
            if (event.key === "ArrowDown" && playerY <= canvas.height - playerSize) {
                playerY += speed;
            }
        });

        draw();
    </script>
</body>
</html>
