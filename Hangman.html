var lives = 0;
var word = "";
var wrongGuesses = [];
var displayArray = []; // Moved here so handleGuess can see it
var correct = 0;

function selectEasy() {
    // .length automatically finds the right number of words
    var x = Math.floor(Math.random() * easy_words.length);
    word = easy_words[x];
    displayArray = new Array(word.length).fill("_");
    lives = 10;
    updateUI();
}

function selectMedium() {
    var x = Math.floor(Math.random() * medium_words.length);
    word = medium_words[x];
    displayArray = new Array(word.length).fill("_");
    lives = 6;
    updateUI();
}

function selectHard() {
    var x = Math.floor(Math.random() * hard_words.length);
    word = hard_words[x];
    displayArray = new Array(word.length).fill("_");
    lives = 6;
    updateUI();
}

function handleGuess() {
    var letter = document.getElementById("guessInput").value.toLowerCase();
    if (letter === "" || word === "") return;

    correct = 0; // Reset this for every new guess
    
    for (let i = 0; i < word.length; i++) {
        if (letter === word[i]) {
            correct = 1;
            displayArray[i] = letter;
        }
    }

    if (correct === 0) {
        lives -= 1;
        wrongGuesses.push(letter);
    }

    document.getElementById("guessInput").value = "";
    updateUI(); // I put all the display updates in one place
}

// This helper function refreshes the text on the screen
function updateUI() {
    document.getElementById("word").innerText = "Word: " + displayArray.join(" ");
    document.getElementById("lives").innerText = "Lives Left: " + lives;
    document.getElementById("wrongGuess").innerText = "Wrong guesses: " + wrongGuesses.join(", ");
    
    // Check for Win/Loss
    if (lives <= 0) {
        alert("Game Over! The word was: " + word);
        location.reload(); // Restarts the game
    } else if (!displayArray.includes("_") && word !== "") {
        alert("You Win!");
        location.reload();
    }
}
