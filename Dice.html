<!DOCTYPE html>
<html>
  <head>
    <title>Dice Simulator</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">
    <style>
      body {
        background-color: #1a1a1a;
        color: white;
        font-family: 'Poppins', sans-serif;
        min-height: 100vh;
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
      }
      button {
        width: 150px;
        height: 80px;
        font-size: 1.2rem;
        border-radius: 10px;
        border: 2px solid white;
        background-color: #333;
        color: white;
        cursor: pointer;
        font-family: 'Poppins', sans-serif;
        margin: 0.5rem;
      }
      button:hover {
        background-color: #555;
      }
      a {
        display: block;
        text-align: center;
      }
      .chart {
        display: flex;
        flex-direction: column;
        align-items: center;
      }
      canvas {
        border: 2px solid #444;
        border-radius: 8px;
      }
      .stats {
        display: flex;
        width: 500px;
        justify-content: space-around;
        margin-top: 0.75rem;
      }
      .stat-box {
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: 0.25rem;
        font-size: 0.78rem;
      }
      .stat-dot {
        width: 12px;
        height: 12px;
        border-radius: 50%;
      }
    </style>
  </head>
  <body>
    <div style="text-align: center;">
      <h1>Dice Simulator</h1>

      <img id="dice" src="RealDice1.png" alt="the dice" style="width:300px;height:300px;">

      <br>
      <button onclick="rollDice()">ROLL</button>
      <button onclick="resetDice()">RESET</button>
      <br><br>

      <div class="chart">
        <canvas id="gameCanvas" width="500" height="500"></canvas>
        <div class="stats">
          <div class="stat-box">
            <div class="stat-dot" style="background:#ff6b6b"></div>
            <div id="Text1">0/0 = 0%</div>
          </div>
          <div class="stat-box">
            <div class="stat-dot" style="background:#ffa94d"></div>
            <div id="Text2">0/0 = 0%</div>
          </div>
          <div class="stat-box">
            <div class="stat-dot" style="background:#ffe066"></div>
            <div id="Text3">0/0 = 0%</div>
          </div>
          <div class="stat-box">
            <div class="stat-dot" style="background:#69db7c"></div>
            <div id="Text4">0/0 = 0%</div>
          </div>
          <div class="stat-box">
            <div class="stat-dot" style="background:#74c0fc"></div>
            <div id="Text5">0/0 = 0%</div>
          </div>
          <div class="stat-box">
            <div class="stat-dot" style="background:#da77f2"></div>
            <div id="Text6">0/0 = 0%</div>
          </div>
        </div>
      </div>

      <a href="index.html"><button>Home Page</button></a>
    </div>

    <script>
      var diceImg = document.getElementById("dice");
      var frequency = [0,0,0,0,0,0];
      var canvas = document.getElementById("gameCanvas");
      var ctx = canvas.getContext("2d");
      var total = 0;
      var colors = ["#ff6b6b", "#ffa94d", "#ffe066", "#69db7c", "#74c0fc", "#da77f2"];

      function drawChart() {
        ctx.clearRect(0, 0, canvas.width, canvas.height);

        var colWidth = canvas.width / 6;
        var maxCount = Math.max(...frequency);

        for (let i = 0; i < 6; i++) {
          if (frequency[i] === 0) continue;

          var barHeight = (frequency[i] / maxCount) * canvas.height;
          var barWidth = colWidth * 0.6;
          var xPos = colWidth * i + (colWidth * 0.2);
          var yPos = canvas.height - barHeight;

          ctx.fillStyle = colors[i];
          ctx.fillRect(xPos, yPos, barWidth, barHeight);

          // draw dice number inside bar
          ctx.fillStyle = "white";
          ctx.font = "bold 16px Poppins";
          ctx.textAlign = "center";
          ctx.fillText(i + 1, xPos + barWidth / 2, canvas.height - 8);
        }
      }

      function updateStats() {
        for (let i = 0; i < 6; i++) {
          let pct = total === 0 ? 0 : Math.floor(100 * frequency[i] / total);
          document.getElementById("Text" + (i + 1)).innerHTML =
            frequency[i] + "/" + total + " = " + pct + "%";
        }
      }

      function rollDice() {
        total += 1;
        let x = Math.floor((Math.random() * 6) + 1);
        frequency[x - 1] += 1;
        diceImg.src = "RealDice" + x + ".png";
        drawChart();
        updateStats();
      }

      function resetDice() {
        frequency = [0, 0, 0, 0, 0, 0];
        total = 0;
        diceImg.src = "RealDice1.png";
        ctx.clearRect(0, 0, canvas.width, canvas.height);
        updateStats();
      }
    </script>
  </body>
</html>
